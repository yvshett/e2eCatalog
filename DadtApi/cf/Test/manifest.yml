---
defaults: &defaults
  buildpacks:
    - https://github.com/cloudfoundry/dotnet-core-buildpack
  memory: 4096M
  disk_quota: 4096M
  instances: 4
  path: ../../bin/Release/net6.0/publish
  env:
    FORCE_HTTPS: true
applications:
  - name: dadt-api-pre
    <<: *defaults
    routes:
      - route: dadt-api-pre.apps1-fm-int.icloud.intel.com
      - route: dadt-api-pre.intel.com
    env:
      NODE_ENV: test
      ASPNETCORE_ENVIRONMENT: Test
  - name: dadt-api-apigee-pre
    <<: *defaults
    instances: 1
    routes:
      - route: dadt-api-apigee-pre.apps1-fm-int.icloud.intel.com
      - route: dadt-api-apigee-pre.intel.com
    env:
      NODE_ENV: test
      ASPNETCORE_ENVIRONMENT: Test
      API_TYPE: Apigee
